<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2018-02-27 13:51:00 +0000">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicon-swc.ico" />
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
    <title>Introduction to High-Performance Computing: Transferring files</title>
  </head>
  <body>
    <div class="container">
      
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      
      <a href="https://software-carpentry.org" class="pull-left">
        <img class="navbar-logo" src="../assets/img/swc-icon-blue.svg" alt="Software Carpentry logo" />
      </a>
      

      
      <a class="navbar-brand" href="../">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="../conduct/">Code of Conduct</a></li>

	
        
        <li><a href="../setup/">Setup</a></li>
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li><a href="../00-hpc-intro/">What is High Performance Computing?</a></li>
            
            <li><a href="../01-connecting/">Connecting to the cluster</a></li>
            
            <li><a href="../02-navigation/">Moving around and looking at things</a></li>
            
            <li><a href="../03-files/">Writing and reading files</a></li>
            
            <li><a href="../04-wildcards-pipes/">Wildcards and pipes</a></li>
            
            <li><a href="../05-scripts/">Scripts, variables, and loops</a></li>
            
            <li><a href="../11-cluster/">Working on a cluster</a></li>
            
            <li><a href="../12-scheduler/">Scheduling jobs</a></li>
            
            <li><a href="../13-modules/">Accessing software</a></li>
            
            <li><a href="../14-transferring-files/">Transferring files</a></li>
            
            <li><a href="../15-resources/">Using resources effectively</a></li>
            
            <li><a href="../16-responsiblity/">Using resources effectively</a></li>
            
            <li><a href="../17-hpc-fundamentals/">HPC Fundamentals</a></li>
            
          </ul>
        </li>
	

	
	
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference/">Reference</a></li>
            
            <li><a href="../about/">About</a></li>
            
            <li><a href="../discuss/">Discussion</a></li>
            
            <li><a href="../figures/">Figures</a></li>
            
            <li><a href="../guide/">Instructor Notes</a></li>
            
          </ul>
        </li>
	

	
        <li><a href="../license/">License</a></li>
	
	<li><a href="/edit/gh-pages/_episodes/14-transferring-files.md">Improve this page <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></li>
	
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>


<div class="row">
  <div class="col-md-1">
    <h3>
      
      <a href="../13-modules/"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-md-10">
    
    <h3 class="maintitle"><a href="../">Introduction to High-Performance Computing</a></h3>
    <h1 class="maintitle">Transferring files</h1>
    
  </div>
  <div class="col-md-1">
    <h3>
      
      <a href="../15-resources/"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 30 min
      <br/>
      <strong>Exercises:</strong> 10 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How do I upload/download files to the cluster?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Be able to tranfer files to and from a computing cluster.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>One thing people very frequently struggle with is transferring files 
to and from a cluster.
We’ll cover several methods of doing this from the command line,
then cover how to do this using the GUI program FileZilla, 
which is much more straightforwards.</p>

<h2 id="grabbing-files-from-the-internet">Grabbing files from the internet</h2>

<p>To download files from the internet, 
the easiest tool to use is <code class="highlighter-rouge">wget</code>.
The syntax is relatively straightforwards: <code class="highlighter-rouge">wget https://some/link/to/a/file.tar.gz</code>
We’ve actually done this before to download our example files:</p>

<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[remote]$ wget https://hpc-carpentry.github.io/hpc-intro/files/bash-lesson.tar.gz
</code></pre></div></div>

<h2 id="transferring-single-files-and-folders-with-scp">Transferring single files and folders with scp</h2>

<p>To copy a single file to or from the cluster, we can use <code class="highlighter-rouge">scp</code>.
The syntax can be a little complex for new users, 
but we’ll break it down here:</p>

<p>To transfer <em>to</em> another computer:</p>
<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[local]$ scp /path/to/local/file.txt yourUsername@remote.computer.address:/path/on/remote/computer
</code></pre></div></div>

<p>To download <em>from</em> another computer:</p>
<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[local]$ scp yourUsername@remote.computer.address:/path/on/remote/computer/file.txt /path/to/local/copy
</code></pre></div></div>

<p>Note that we can simplify doing this by shortening our paths.
On the remote computer, everything after the <code class="highlighter-rouge">:</code> is relative to our home directory.
We can simply just add a <code class="highlighter-rouge">:</code> and leave it at that if we don’t care where the file goes.</p>

<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[local]$ scp local-file.txt yourUsername@remote.computer.address:
</code></pre></div></div>

<p>To recursively copy a directory, we just add the <code class="highlighter-rouge">-r</code> (recursive) flag:</p>

<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[local]$ scp -r some-local-folder/ yourUsername@remote.computer.address:target-directory/
</code></pre></div></div>

<h2 id="transferring-files-interactively-with-sftp">Transferring files interactively with sftp</h2>

<p><code class="highlighter-rouge">scp</code> is useful, but what if we don’t know the exact location of what we want to transfer?
Or perhaps we’re simply not sure which files we want to tranfer yet.
<code class="highlighter-rouge">sftp</code> is an interactive way of downloading and uploading files.
Let’s connect to a cluster, using <code class="highlighter-rouge">sftp</code>- you’ll notice it works the same way as SSH:</p>

<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sftp yourUsername@remote.computer.address
</code></pre></div></div>

<p>This will start what appears to be a bash shell (though our prompt says <code class="highlighter-rouge">sftp&gt;</code>).
However we only have access to a limited number of commands.
We can see which commands are available with <code class="highlighter-rouge">help</code>:</p>

<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sftp&gt; help
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Available commands:
bye                                Quit sftp
cd path                            Change remote directory to 'path'
chgrp grp path                     Change group of file 'path' to 'grp'
chmod mode path                    Change permissions of file 'path' to 'mode'
chown own path                     Change owner of file 'path' to 'own'
df [-hi] [path]                    Display statistics for current directory or
                                   filesystem containing 'path'
exit                               Quit sftp
get [-afPpRr] remote [local]       Download file
reget [-fPpRr] remote [local]      Resume download file
reput [-fPpRr] [local] remote      Resume upload file
help                               Display this help text
lcd path                           Change local directory to 'path'
lls [ls-options [path]]            Display local directory listing
lmkdir path                        Create local directory
ln [-s] oldpath newpath            Link remote file (-s for symlink)
lpwd                               Print local working directory
ls [-1afhlnrSt] [path]             Display remote directory listing

# omitted further output for clarity
</code></pre></div></div>

<p>Notice the presence of multiple commands that make mention of local and remote.
We are actually connected to two computers at once (with two working directories!).</p>

<p>To show our remote working directory:</p>
<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sftp&gt; pwd
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Remote working directory: /global/home/yourUsername
</code></pre></div></div>

<p>To show our local working directory, we add an <code class="highlighter-rouge">l</code> in front of the command:</p>

<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sftp&gt; lpwd
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Local working directory: /home/jeff/Documents/teaching/hpc-intro
</code></pre></div></div>

<p>The same pattern follows for all other commands:</p>

<ul>
  <li><code class="highlighter-rouge">ls</code> shows the contents of our remote directory, while <code class="highlighter-rouge">lls</code> shows our local directory contents.</li>
  <li><code class="highlighter-rouge">cd</code> changes the remote directory, <code class="highlighter-rouge">lcd</code> changes the local one.</li>
</ul>

<p>To upload a file, we type <code class="highlighter-rouge">put some-file.txt</code> (tab-completion works here).</p>

<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sftp&gt; put config.toml
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Uploading config.toml to /global/home/yourUsername/config.toml
config.toml                                   100%  713     2.4KB/s   00:00 
</code></pre></div></div>

<p>To download a file we type <code class="highlighter-rouge">get some-file.txt</code>:</p>

<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sftp&gt; get config.toml
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Fetching /global/home/yourUsername/config.toml to config.toml
/global/home/yourUsername/config.toml                               100%  713     9.3KB/s   00:00 
</code></pre></div></div>

<p>And we can recursively put/get files by just adding <code class="highlighter-rouge">-r</code>.
Note that the directory needs to be present beforehand.</p>

<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sftp&gt; mkdir content
sftp&gt; put -r content/
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Uploading content/ to /global/home/yourUsername/content
Entering content/
content/scheduler.md              100%   11KB  21.4KB/s   00:00    
content/index.md                  100% 1051     7.2KB/s   00:00    
content/transferring-files.md     100% 6117    36.6KB/s   00:00    
content/.transferring-files.md.sw 100%   24KB  28.4KB/s   00:00    
content/cluster.md                100% 5542    35.0KB/s   00:00    
content/modules.md                100%   17KB 158.0KB/s   00:00    
content/resources.md              100% 1115    29.9KB/s   00:00    
</code></pre></div></div>

<p>To quit, we type <code class="highlighter-rouge">exit</code> or <code class="highlighter-rouge">bye</code>.</p>

<h2 id="transferring-files-interactively-with-filezilla-sftp">Transferring files interactively with FileZilla (sftp)</h2>

<p>FileZilla is a cross-platform client for downloading and uploading files to and from a remote computer.
It is absolutely fool-proof and always works quite well.
In fact, it uses the exact same protocol as <code class="highlighter-rouge">sftp</code> under the hood.
If <code class="highlighter-rouge">sftp</code> works, so will FileZilla!</p>

<p>Download and install the FileZilla client from <a href="https://filezilla-project.org">https://filezilla-project.org</a>.
After installing and opening the program, 
you should end up with a window with a file browser of your local system 
on the left hand side of the screen.
When you connect to the cluster, your cluster files will appear on the right hand side.</p>

<p>To connect to the cluster, 
we’ll just need to enter our credentials at the top of the screen:</p>

<ul>
  <li>Host: <code class="highlighter-rouge">sftp://login.cac.queensu.ca</code></li>
  <li>User: Your cluster username</li>
  <li>Password: Your cluster password</li>
  <li>Port: (leave blank to use the default port)</li>
</ul>

<p>Hit “Quickconnect” to connect!
You should see your remote files appear on the right hand side of the screen.
You can drag-and-drop files between the left (local) and right (remote) sides 
of the screen to transfer files.</p>

<h2 id="compressing-files">Compressing files</h2>

<p>Sometimes we will want to compress files ourselves to make file transfers easier.
The larger the file, the longer it will take to transfer. 
Moreover, we can compress a whole bunch of little files into one big file to make it easier
on us (no one likes transferring 70000 little files)!</p>

<p>The two compression commands we’ll probably want to remember are the following:</p>

<ul>
  <li>Compress a single file with Gzip - <code class="highlighter-rouge">gzip filename</code></li>
  <li>Compress a lot of files/folders with Gzip - <code class="highlighter-rouge">tar -czvf archive-name.tar.gz folder1 file2 folder3 etc</code></li>
</ul>

<blockquote class="challenge">
  <h2 id="transferring-files">Transferring files</h2>
  <p>Using one of the above methods, try transferring files to and from the cluster.
Which method do you like the best?</p>
</blockquote>

<blockquote class="callout">
  <h2 id="working-with-windows">Working with Windows</h2>
  <p>When you transfer files to from a Windows system to a Unix system 
(Mac, Linux, BSD, Solaris, etc.) this can cause problems.
Windows encodes its files slightly different than Unix,
and adds an extra character to every line.</p>

  <p>On a Unix system, every line in a file ends with a <code class="highlighter-rouge">\n</code> (newline).
On Windows, every line in a file ends with a <code class="highlighter-rouge">\r\n</code> (carriage return + newline).
This causes problems sometimes.</p>

  <p>Though most modern programming languages and software handles this correctly,
in some rare instances, you may run into an issue.
he solution is to convert a file from Windows to Unix encoding with the <code class="highlighter-rouge">dos2unix</code> command.</p>

  <p>You can identify if a file has Windows line endings with <code class="highlighter-rouge">cat -A filename</code>.
A file with Windows line endings will have <code class="highlighter-rouge">^M$</code> at the end of every line.
A file with Unix line endings will have <code class="highlighter-rouge">$</code> at the end of a line.</p>

  <p>To convert the file, just run <code class="highlighter-rouge">dos2unix filename</code>.
(Conversely, to convert back to Windows format, you can run <code class="highlighter-rouge">unix2dos filename</code>.)</p>
</blockquote>

<blockquote class="callout">
  <h2 id="a-note-on-ports">A note on ports</h2>
  <p>All file tranfers using the above methods use encrypted communication over port 22.
This is the same connection method used by SSH.
In fact, all file transfers using these methods occur through an SSH connection.
If you can connect via SSH over the normal port, you will be able to transfer files.</p>
</blockquote>



<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p><code class="highlighter-rouge">wget</code> downloads a file from the internet.</p>
</li>
    
    <li><p><code class="highlighter-rouge">sftp</code>/<code class="highlighter-rouge">scp</code> transfer files to and from your computer.</p>
</li>
    
    <li><p>You can use an SFTP client like FileZilla to transfer files through a GUI.</p>
</li>
    
  </ul>
</blockquote>


<div class="row">
  <div class="col-md-1">
    <h3>
      
      <a href="../13-modules/"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-md-10">
    
  </div>
  <div class="col-md-1">
    <h3>
      
      <a href="../15-resources/"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


      
      
<footer>
  <div class="row">
    <div class="col-md-6" align="left">
      <h4>
	Copyright &copy; 2016–2018
	
	<a href="https://software-carpentry.org">Software Carpentry Foundation</a>
	
      </h4>
    </div>
    <div class="col-md-6" align="right">
      <h4>
	
	<a href="/edit/gh-pages/_episodes/14-transferring-files.md">Edit on GitHub</a>
	
	/
	<a href="/blob/gh-pages/CONTRIBUTING.md">Contributing</a>
	/
	<a href="/">Source</a>
	/
	<a href="/blob/gh-pages/CITATION">Cite</a>
	/
	<a href="mailto:lessons@software-carpentry.org">Contact</a>
      </h4>
    </div>
  </div>
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
