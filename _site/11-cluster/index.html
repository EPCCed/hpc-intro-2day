<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2018-02-27 13:51:00 +0000">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicon-swc.ico" />
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
    <title>Introduction to High-Performance Computing: Working on a cluster</title>
  </head>
  <body>
    <div class="container">
      
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      
      <a href="https://software-carpentry.org" class="pull-left">
        <img class="navbar-logo" src="../assets/img/swc-icon-blue.svg" alt="Software Carpentry logo" />
      </a>
      

      
      <a class="navbar-brand" href="../">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="../conduct/">Code of Conduct</a></li>

	
        
        <li><a href="../setup/">Setup</a></li>
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li><a href="../00-hpc-intro/">What is High Performance Computing?</a></li>
            
            <li><a href="../01-connecting/">Connecting to the cluster</a></li>
            
            <li><a href="../02-navigation/">Moving around and looking at things</a></li>
            
            <li><a href="../03-files/">Writing and reading files</a></li>
            
            <li><a href="../04-wildcards-pipes/">Wildcards and pipes</a></li>
            
            <li><a href="../05-scripts/">Scripts, variables, and loops</a></li>
            
            <li><a href="../11-cluster/">Working on a cluster</a></li>
            
            <li><a href="../12-scheduler/">Scheduling jobs</a></li>
            
            <li><a href="../13-modules/">Accessing software</a></li>
            
            <li><a href="../14-transferring-files/">Transferring files</a></li>
            
            <li><a href="../15-resources/">Using resources effectively</a></li>
            
            <li><a href="../16-responsiblity/">Using resources effectively</a></li>
            
            <li><a href="../17-hpc-fundamentals/">HPC Fundamentals</a></li>
            
          </ul>
        </li>
	

	
	
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference/">Reference</a></li>
            
            <li><a href="../about/">About</a></li>
            
            <li><a href="../discuss/">Discussion</a></li>
            
            <li><a href="../figures/">Figures</a></li>
            
            <li><a href="../guide/">Instructor Notes</a></li>
            
          </ul>
        </li>
	

	
        <li><a href="../license/">License</a></li>
	
	<li><a href="/edit/gh-pages/_episodes/11-cluster.md">Improve this page <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></li>
	
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>


<div class="row">
  <div class="col-md-1">
    <h3>
      
      <a href="../05-scripts/"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-md-10">
    
    <h3 class="maintitle"><a href="../">Introduction to High-Performance Computing</a></h3>
    <h1 class="maintitle">Working on a cluster</h1>
    
  </div>
  <div class="col-md-1">
    <h3>
      
      <a href="../12-scheduler/"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 15 min
      <br/>
      <strong>Exercises:</strong> 10 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>What is a cluster?</p>
</li>
	
	<li><p>How does a cluster work?</p>
</li>
	
	<li><p>How do I log on to a cluster?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Connect to a cluster.</p>
</li>
	
	<li><p>Understand the general cluster architecture.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>By now, we are all expert Bash users.
Well, maybe not experts, but we know everything we need to in order to start
using a high-performance computing “supercomputer”.
Before we start though, let’s go over a few key concepts.</p>

<h2 id="what-is-a-cluster">What is a cluster?</h2>

<p>The words “cloud”, “cluster”, and “high-performance computing” get thrown around a lot.
So what do they mean exactly?
And more importantly, how do we use them for our work?</p>

<p>The <em>cloud</em> is a generic term commonly used to refer to remote computing
resources of any kind – that is, any computers that you use but are not
right in front of you.<br />
Cloud can refer to webservers, remote storage, API endpoints,
as well as more traditional “compute” resources.
A <em>cluster</em> on the other hand, is a term used to describe a network of computers.
The computers in a cluster typically share a common purpose,
and are used to accomplish tasks that might otherwise be too big for any one computer.</p>

<p><img src="/fig/linux-cloud.jpg" alt="The cloud is made of Linux" /></p>

<h2 id="where-are-we">Where are we?</h2>

<p>Very often, many users are tempted to think of a high-performance
computing installation as one giant, magical machine.
Sometimes, people will assume that the computer they’ve logged onto is the entire computing cluster.
So what’s really happening? What computer have we logged on to?
The name of the current computer we are logged onto can be checked with the <code class="highlighter-rouge">hostname</code> command.
(Clever users will notice that the current hostname is also part of our prompt!)</p>

<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[remote]$ hostname
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gra-login3
</code></pre></div></div>

<p>Individual computers that compose a cluster are typically called <em>nodes</em> (although
  you will also hear people call them <em>servers</em>, <em>computers</em> and <em>machines</em>).  On a cluster,
  there are different types of nodes for different types of tasks.<br />
The node where you are right now is called the <em>head node</em>, <em>login node</em> or
<em>submit node</em>.  A login node serves as an access point to the cluster.
As a gateway, it is well suited for uploading and downloading files,
setting up software, and running quick tests.
It should never be used for doing actual work.</p>

<p>The real work on a cluster gets done by the <em>worker</em> (or <em>execute</em>) <em>nodes</em>
Worker nodes come in many shapes and sizes,
but generally are dedicated to doing all of the heavy lifting that needs doing.</p>

<p>All interaction with the worker nodes is handled by a specialized piece of software called a scheduler
(the scheduler used in this lesson is called SLURM).  We’ll learn more about how to use 
the scheduler to submit jobs next, but for now, it can also tell us more information about 
the worker nodes.</p>

<p>For example, we can view all of the worker nodes with the <code class="highlighter-rouge">sinfo</code> command.</p>

<div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[remote]$ sinfo
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PARTITION AVAIL  TIMELIMIT  NODES  STATE NODELIST
compute*     up 7-00:00:00      1 drain* gra259
compute*     up 7-00:00:00     11  down* gra[8,99,211,268,376,635,647,803,852,966,986]
compute*     up 7-00:00:00      1   drng gra272
compute*     up 7-00:00:00     31   comp gra[988-991,994-1002,1006-1007,1015,1017,1021-1022,1028-1033,1037-1041,1043]
compute*     up 7-00:00:00     33  drain gra[225-251,253-256,677,1026]
compute*     up 7-00:00:00    323    mix gra[7,13,25,41,43-44,56,58-77,107-108,112-113,117,125-126,163,168-169,173,180-203,205-210,220,224,257-258,300-317,320,322-349,385-387,398,400-428,448,452,460,528-529,540-541,565-601,603-606,618,622-623,628,643-646,652,657,660,665,678-699,710-711,713-728,734-735,737,741-751,753-755,765,767,774,776,778,796-798,802,805-812,827,830,832,845-846,853,856,865-866,872,875,912,914,916-917,925,928,930,934,953-954,959-960,965,969-971,973,1004,1008-1009,1011,1013-1014,1023-1025]
compute*     up 7-00:00:00    464  alloc gra[1-6,9-12,14-19,21-24,26-40,42,45-55,57,100-106,109-111,114-116,118-122,127,164-167,174-179,204,212-219,221-223,252,260-267,269-271,273-284,318-319,321,350-375,377-384,388-397,399,453-459,461-501,526-527,530-539,542-564,607-608,629-634,636-642,648-651,653-656,658-659,661-664,666-676,700-703,738,756-764,766,768-773,804,813-826,828-829,831,833-844,847-851,854-855,857-864,867-871,873-874,876-911,913,915,918-924,926-927,929,931-933,935-936,938-952,955-958,961-964,967-968,972,974-985,987,992-993,1003,1005,1010,1012,1016,1018-1020,1027,1034-1036,1042]
compute*     up 7-00:00:00    176   idle gra[78-98,123-124,128-162,170-172,285-299,429-447,449-451,502-525,602,609-617,619-621,624-627,704-709,712,729-733,736,739-740,752,775,777,779-795,799-800]
compute*     up 7-00:00:00      3   down gra[20,801,937]
</code></pre></div></div>

<p>There are also specialized machines used for managing disk storage, user authentication,
and other infrastructure-related tasks.
Although we do not typically logon to or interact with these machines directly,
they enable a number of key features like ensuring our user account and files are available throughout the cluster.
This is an important point to remember:
files saved on one node (computer) are available everywhere on the cluster!</p>

<h2 id="whats-in-a-node">What’s in a node?</h2>

<p>All of a cluster’s nodes have the same components as your own laptop or desktop:
<em>CPUs</em> (sometimes also called
  <em>processors</em> or <em>cores</em>), <em>memory</em> (or <em>RAM</em>), and <em>disk</em> space.<br />
  CPUs are a computer’s tool for actually running programs and calculations.
  Information about a current task is stored in the computer’s memory.  Disk
  is a computer’s long-term storage for information it will need later.</p>

<blockquote class="challenge">
  <h2 id="explore-your-computer">Explore Your Computer</h2>

  <p>Try to find out the number of CPUs and amount of memory available on your 
personal computer.</p>
</blockquote>

<blockquote class="challenge">
  <h2 id="explore-the-head-node">Explore The Head Node</h2>

  <p>Now we’ll compare the size of your computer with the size of the head node: 
To see the number of processors, run:</p>
  <div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nproc --all
</code></pre></div>  </div>
  <p>or</p>
  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat /proc/cpuinfo
{: .bash}
to see full details.  

How about memory? Try running: 
</code></pre></div>  </div>
  <p>free -m</p>
  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{: .bash}
or for more details: 
</code></pre></div>  </div>
  <p class="bash">cat /proc/meminfo free -m
```</p>
</blockquote>

<blockquote class="challenge">
  <h2 id="explore-a-worker-node">Explore a Worker Node</h2>

  <p>Finally, let’s look at the resources available on the worker nodes where your jobs 
will actually run.<br />
Try running this command to see the name, CPUs and memory available on the worker nodes:</p>
  <div class="bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sinfo -n aci-377 -o "%n %c %m"
</code></pre></div>  </div>
</blockquote>

<blockquote class="callout">
  <h2 id="units">Units</h2>

  <p>A computer’s memory and disk are measured in units called <em>bytes</em>.  The magnitude 
of a file or memory use is measured using the same prefixes of the metric system: 
kilo, mega, giga, tera.  So 1024 bytes is a kilobyte, 1024 kilobytes is a megabyte, 
and so on.</p>

</blockquote>

<p>With all of this in mind, we will now cover how to talk to the cluster’s scheduler,
and use it to start running our scripts and programs!</p>


<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>A cluster is a set of networked machines.</p>
</li>
    
    <li><p>Clusters typically provide a login node and a set of worker nodes.</p>
</li>
    
    <li><p>Files saved on one node are available everywhere.</p>
</li>
    
  </ul>
</blockquote>


<div class="row">
  <div class="col-md-1">
    <h3>
      
      <a href="../05-scripts/"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-md-10">
    
  </div>
  <div class="col-md-1">
    <h3>
      
      <a href="../12-scheduler/"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


      
      
<footer>
  <div class="row">
    <div class="col-md-6" align="left">
      <h4>
	Copyright &copy; 2016–2018
	
	<a href="https://software-carpentry.org">Software Carpentry Foundation</a>
	
      </h4>
    </div>
    <div class="col-md-6" align="right">
      <h4>
	
	<a href="/edit/gh-pages/_episodes/11-cluster.md">Edit on GitHub</a>
	
	/
	<a href="/blob/gh-pages/CONTRIBUTING.md">Contributing</a>
	/
	<a href="/">Source</a>
	/
	<a href="/blob/gh-pages/CITATION">Cite</a>
	/
	<a href="mailto:lessons@software-carpentry.org">Contact</a>
      </h4>
    </div>
  </div>
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
